const button=document.querySelector(".main_content_button"),close=document.querySelector(".modal_close"),overlay=document.querySelector(".overlay"),modal=document.querySelector(".modal"),contentCounter=document.querySelector(".modal_paragraph_counter"),counterReset=document.querySelector(".modal_reset"),confetti=document.querySelector(".confetti");let counter,maxParticleCount=(counter=null===localStorage.getItem("counter")?0:localStorage.getItem("counter"),500),particleSpeed=.1,startConfetti,stopConfetti,toggleConfetti,removeConfetti;!function(){startConfetti=e,stopConfetti=t,toggleConfetti=function(){(i?t:e)()},removeConfetti=function(){stopConfetti(),a=[]};let n=["DodgerBlue","OliveDrab","Gold","Pink","SlateBlue","LightBlue","Violet","PaleGreen","SteelBlue","SandyBrown","Chocolate","Crimson"],i=!1,r=null,a=[],c=0;function d(e,t,o){return e.color=n[Math.random()*n.length|0],e.x=Math.random()*t,e.y=Math.random()*o-o,e.diameter=10*Math.random()+5,e.tilt=10*Math.random()-10,e.tiltAngleIncrement=.07*Math.random()+.05,e.tiltAngle=0,e}function e(){var e=window.innerWidth,t=window.innerHeight;window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,16.6666667)};let o=document.getElementById("confetti-canvas"),l=(null===o&&((o=document.createElement("canvas")).setAttribute("id","confetti-canvas"),o.setAttribute("style","display:block;z-index:2;pointer-events:none;"),confetti.appendChild(o),o.width=e,o.height=t,window.addEventListener("resize",function(){o.width=window.innerWidth,o.height=window.innerHeight},!0)),o.getContext("2d"));for(;a.length<maxParticleCount;)a.push(d({},e,t));i=!0,null===r&&function e(){if(l.clearRect(0,0,window.innerWidth,window.innerHeight),0===a.length)r=null;else{{let t=window.innerWidth,o=window.innerHeight,n;c+=.01;for(let e=0;e<a.length;e++)n=a[e],!i&&n.y<-15?n.y=o+100:(n.tiltAngle+=n.tiltAngleIncrement,n.x+=Math.sin(c),n.y+=.5*(Math.cos(c)+n.diameter+particleSpeed),n.tilt=15*Math.sin(n.tiltAngle)),(n.x>t+20||n.x<-20||n.y>o)&&(i&&a.length<=maxParticleCount?d(n,t,o):(a.splice(e,1),e--))}var t,o,n=l;for(let e=0;e<a.length;e++)t=a[e],n.beginPath(),n.lineWidth=t.diameter,n.strokeStyle=t.color,o=t.x+t.tilt,n.moveTo(o+t.diameter/2,t.y),n.lineTo(o,t.y+t.tilt+t.diameter/2),n.stroke();r=requestAnimFrame(e)}}()}function t(){i=!1}}();const clearCounter=()=>{counterReset.classList.add("show"),confetti.style.display="block",startConfetti()},showModal=(e,t,o)=>{e.addEventListener("click",e=>{e.preventDefault(),null!==t&&t.classList.add("show"),null!==o&&o.classList.add("show"),counter++,window.scrollTo(0,0),document.body.style.overflow="hidden",contentCounter.textContent=counter+" times",localStorage.setItem("counter",counter),5<=counter&&clearCounter()})},closeModal=(t,o,n)=>{t.addEventListener("click",e=>{e.preventDefault(),t===counterReset&&(localStorage.removeItem("counter"),counter=0,counterReset.classList.remove("show"),stopConfetti()),null!==o&&o.classList.remove("show"),null!==n&&n.classList.remove("show"),document.body.style.overflow="auto"})};5<=localStorage.getItem("counter")&&clearCounter(),showModal(button,modal,overlay),closeModal(close,modal,overlay),closeModal(overlay,modal,overlay),closeModal(counterReset,modal,overlay);